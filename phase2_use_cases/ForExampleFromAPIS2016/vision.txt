Трябва да се проектира информационна система за стартираща агенция за 
недвижими имоти.

Целта на информационната система е да осигури уеб интерфейс, чрез който ++
+брокери на агенцията да могат по-лесно да намират наематели и купувачи за 
имотите на своите клиенти.+++ Връзката между продавачите и наемодателите с 
брокер ще се осъществява извън рамките на системата.

+++Потребители на системата ще бъдат брокери, наематели и купувачи, 
администратор и одитор.+++

+++Създаването на новата информационна система цели да реши проблема с 
некоректното и неточно описание в обявите за имоти, което дават продавачи и 
наемодатели, като управлението на обявите ще се извършва от брокерите на 
агенцията.+++ Системата ще позволява на брокерите да +++създават и 
редактират+++ обяви за недвижими имоти, а на наематели и купувачи – да 
имат гъвкав и удобен интерфейс за търсене на обяви по различни критерии; да 
инициират комуникация с брокер +++и да дават своята оценка за обяви и брокери 
след сключване на сделка.+++

Всички счетоводни и финансови процеси в агенцията не са предмет на 
информационната система.

...

Роли			

Системата трябва да поддържа следните роли:
-нерегистриран потребител - има права да:
--търси и разглежда обяви в сайта
--споделя обяви в социалните мрежи
--си регистрира акаунт, с потвърждение по email, за да се гарантира вярност на вписания адрес
--използва контакт формата за изпращане на съобщение към брокерите
--използва чат системата, като не му се запазва log на разговора

-регистриран потребител - има права да:
--прави всички неща, които може нерегистриран потребител, освен регистрация на акаунт
--използва чат системата, като се запазва log на разговора
--``запазва'' обяви, които е харесал в профила си
--променя личните си данни
--поиска ресет на паролата си (новата му се изпраща на мейла)
--подаде заявка, че иска да стане брокер

-брокер - има права да:
--прави всички неща, които може регистриран потребител
--създава обяви за имоти
--редактира и премахва своите обяви за имоти
--променя състоянието на своите обяви (активни, неактивни, създадени)
--променя статуса на своя обява (нормална, VIP)
--комуникира през чат системата с други потребители, ако те са инициирали комуникацията
--получава съобщения през контакт формата към дадена обява
--вижда точният адрес на имота в обявите (както собствени, така и на други брокери)
--вижда контактната информация за собствениците на имотите в  обявите (както собствени, така и на други брокери)
--има право да вижда данни на даден потребител (username, email, име, телефон, снимка)

-администратор (вграден в системата сервизен акаунт, единствен):
--прави всички неща, които може регистриран потребител
--има право да вижда списък на потребителите в системата
--има право да разглежда личните данни на потребителите (username, email, име, телефон, снимка)
--няма право да променя личните данни на потребителите (username, парола, email, име, телефон, снимка)
--има право да одобрява заявки на регистрирани потребители за промяна на статуса им към 'брокер'
--има право да премахва статуса 'брокер' от акаунти, след като е асоциирал обявите му с други брокери
--има право да премахва акаунти от системата, без сервизните такива (администратор, одитор)
--няма право да редактира съдържанието на обява
--има право да премахва обяви
--има право да променя статуса на обява (нормална, VIP)
--има право да променя състоянието на обява (активна, неактивна) (при премахване или промяна на
  статуса/състоянието на обява се нотифицира брокера - собственик на обявата)
--има право да променя боркера-собственик на обява
--получава копие от съобщенията, изпратени през контакт формата
--препраща получено съобщене (от контакт форма) към брокер

-одитор (вграден в системата сервизен акаунт, единствен) -- има права само да чете одит лога

...

Обяви

Обявите се създават, редактират и премахват от брокер. Администраторът има право
да редактира+++статусите на обявите++, да премахва обявите на всички брокери, +++да
назначава обяви на един брокер към друг брокер. Администраторът може да управлява обяви
в извънредни ситуации като отсъствие/уволнение/напускане на брокер, некоректно
управление на обява от брокер. Когато администраторът изтрива/променя статуса на обява,
системата уведомява брокера, който е текущ отговорник за обявата.+++

Обявите могат да бъдат активни или неактивни, като обикновенните потребители
(нерегистрирани и регистрирани) виждат само активните обяви, докато неактивните обяви
са видими само за брокерите и администратора.

Обявите могат да бъдат нормални или VIP. Този статус може да се променя само ръчно от
брокерите (и администратора).+++Ако обява е била с VIP статус и е станала неактивна,
при активирането ѝ, отново е с този VIP статус.+++

Обявите съдържат следните данни:
+++-рейтинг+++
-идентификатор на брокер
-натрупан до момента рейтинг на обявата
-активна/неактивна обява 
-нормална/VIP обява

-характеристики на имота:
--местоположение - град, квартал, улица и номер, номер на блок
--детайлно местоположение - град, квартал, улица и номер, номер на блок, вход, етаж, апартамент
--площ в квадратни метри
--тип на цената (месечен наем/цена за закупуване), валута (BGN, USD, EUR), цена

--тип на имота - апартамент, къща, гараж, парцел
--специфични характеристики според типа:
---апартамент -- тип (едностаен, двустаен, тристаен, многостаен, мезонет, студио), етаж, изложение,
                 година и тип на строителството, прилежащи имоти (мазета, гаражи) и общи части,
                 обзавеждане, интернет, ТЕЦ, СОТ, телефон, ток, вода
---къща -- застроена и дворна площ, брой етажи, прилежащи имоти (мазета, гаражи),	обзавеждане,
           интернет, ТЕЦ, СОТ, телефон, ток, вода
---гараж -- ток, вода
---парцел -- тип(в регулация, земеделска земя), ток, вода

-текстово поле -- свободно описание на обявата, до 5 KB. Полето трябва да позволява въвеждането
                  на символи за нов ред
-снимки и скици -- binary формат, до 20 броя общо, всяка с размер до 1 MB, минимум една снимка
                   и една скица 
-географски данни, описващи точната локация (GPS координати)
-информация за наемодателя/продавача -- имена, телефон, email, текст

Информацията за наемодателя/продавача и детайлното местоположение е достъпна само за брокерите и администратора.

...

Чат система

+++Чат системата дава възможност на потребителите да се свържат в реално време с брокер от Агенцията.
Комуникацията се осъществява посредством обмяна на текстови съобщения между двете страни. Потребите-
лите виждат бутон за чат в системата, както и означение за това дали в момента има брокери на линия, 
които имат възможност да отговорят на съобщенията му. Инициирането на чат сесия се извършва от 
потребителя с първото изпратено съобщение. В този момент за потребителя се създава виртуална чат 
стая, която е активна докато потребителя е на линия в системата. В една чат стая присъства само един
потребител, но е възможно да се присъединят множество брокери. От гледна точка на потребителя в
стаята има само един брокер - съобщения от няколко брокери се визуализират идентично.

Брокерите от своя страна виждат всички чат стаи, статусите им и част от изпратените съобщения в 
стаята чрез специален интерфейс. Те имат възможност да се присъединят към коя да е от активните чат 
стаи. Статусите на чат стаите могат да бъдат: неактивна, непрочетена и прочетена. 
Статус "неактивна" означава, че потребителят е затворил чата си или е излязъл от системата. 
Статус "непрочетена" означава, че съобщенията, изпратени от потребителя все още не са били прочетени
от брокер. 
Статус "прочетена" означава, че съобщенията са прочетени.
Чатът не е обвързан с обявите в системата или с брокерите - всеки брокер може да отговаря на всеки
потребител.

Чат системата може да се използва както от регистрирани, така и от нерегистрирани потребители. 
Когато регистриран потребител използва чат системата, в стаите му се визуализира неговото име, 
въведено в личния му профил. За нерегистрираните потребители съществува изискване да въведат име, 
което временно да се използва в чат стаите. Регистрираните потребители също така имат възможност да 
виждат хронология на предишните си чатове - тя се запазва за определен период от време в системата. 
Нерегистираните потребители нямат тази възможност.+++

...

Одит лог

Системата трябва да поддържа одит лог, в който да записва всички действия на регистрирани потребители
в системата. +++Одит лога може да бъде преглеждането както изцяло, така и само записите, които отговарят
на въведените критерии от Одитора.+++

Логовете съдържат:
дата и час на събитието
извършител (username)
от къде е извършено действието (IP адрес)
тип на действието
субект на действието
старата и новата стойност на промененото поле, ако е парола - звездички

Записват се всички промени върху потребителските профили и обявите, както и изпратените съобщения от
контакт формата.
+++ В одит лога не отразяват промени, породени от рейтинговата система.+++
  				
Одит лога може да се чете само от одиторският акаунт, и не може да се променя от никого.
  				
Събитията, по-стари от 6 месеца се премахват от лога.

...

8. Рейтингова система за брокерите и обявите

Всяка обява има собствен рейтинг по скалата от 0 до 5. Визуализира се заедно с обявата под формата
на пет звезди, като част от тях са запълнени, съответно показващи текущия рейтинг на обявата.

Потребителите имат право да гласуват за обяви с оценки от 1 до 5. Изчислява се среден рейтинг на
обявата спрямо събраната сума от всички гласувания, разделена на броя гласували.

+++В рейтинговата система могат да гласуват само регистрирани потребители.+++

Рейтинга на дадена обява не участва по никакъв начин в търсенето или сортирането на обяви. Служи
само за визуализация. 

Брокерите също имат рейтинг, подобен на този на обявите. Потребителите могат да гласуват за брокер
независимо от обявите му, както и могат да гласуват за обяви независимо от брокера. 

Няма връзка между рейтинга на обява и брокера, който я е пуснал. 

+++Регистрираните потребители дават своята оценка за обява/брокер през конкретна обява с статус
„Активна“. След като бъде направена сделка между брокер и наемател/купувач обявата се изтрива от
системата и потребителите нямат възможност да дадат своята оценка.+++

Брокерите и обявите започват с рейтинг 0, което означава, че никой не е гласувал за тях. 

...

Нефункционални изисквания
	
Системата трябва да:
-е достъпна през уеб интерфейс
-поддържа около 100-150 посещения на ден
-поддържа 1000 регистрирани потребителя
-поддържа 400 активни обяви
-поддържа 10000 обяви общо (активни и неактивни)
-осигурява резултат при търсене до 3 секунди
-осигурява зареждане на страница за до 1-1.5 секунди
-поддържа паролите в криптиран вид
-може да работи върху GNU/Linux операционна система
-може да е в експлоатация 10 години
-има автоматичен онлайн бекъп не по-рядко от веднъж на 24 часа
-потребителските сесии в системата изтичат автоматично при 1 час неактивност на потребителя
+++-поддържа около 10 брокерси акаунта+++

Допустимият downtime на системата е не повече от 48 часа общо на година.

...

---------- Всичко останало от документа за Част 1 остава непроменено ---------
